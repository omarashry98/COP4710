<!DOCTYPE html>
<html>
    <head>
        <title>College Event Website</title>
        <!-- Add Bootstrap CSS and JS -->
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
        <link
            rel="stylesheet"
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        />

        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

        <link rel="stylesheet" type="text/css" href="homepageStyle.css" />

        <!-- GOOGLE MAPS API -->
        <script
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAJCH4Rz-RmD8ErAJGHas-_MavrBfc6lpc"
            async
            defer
        ></script>

        <!-- JS FILES FOR APP FUNCTIONALITY -->
        <script src="js/code.js"></script>
        <script src="js/fetchEvents.js"></script>
        <script src="js/createEvent.js"></script>
        <script src="js/createRso.js"></script>
        <script src="js/createUniversity.js"></script>
        <script src="js/joinRSO.js"></script>
        <script src="js/leaveRso.js"></script>
    </head>
    <body>
        <!-- Navigation Bar -->
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand" href="#">College Event Website</a>
            <button
                class="navbar-toggler"
                type="button"
                data-toggle="collapse"
                data-target="#navbarNav"
                aria-controls="navbarNav"
                aria-expanded="false"
                aria-label="Toggle navigation"
            >
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <div class="navbar-nav mr-auto">
                    <!-- Add any additional nav links here -->
                </div>
                <!-- Super Admin Buttons -->
                <!-- <button
                    type="button"
                    class="btn super-admin-only"
                    data-toggle="modal"
                    data-target="#approvePublicEventModal"
                >
                    Approve RSO
                </button> -->
                <button
                    type="button"
                    class="btn super-admin-only"
                    data-toggle="modal"
                    data-target="#createUniversityModal"
                >
                    Create University
                </button>

                <!-- Admin Buttons -->
                <button
                    type="button"
                    class="btn admin-only"
                    data-toggle="modal"
                    data-target="#createEventModal"
                >
                    Create Event
                </button>
                <button
                    id="createRsoBtn"
                    type="button"
                    class="btn admin-only"
                    data-toggle="modal"
                    data-target="#createRSOModal"
                >
                    Create RSO
                </button>

                <!-- Student Buttons -->
                <button
                    type="button"
                    class="btn student-only"
                    data-toggle="modal"
                    data-target="#joinRSOModal"
                >
                    Join RSO
                </button>

                <!-- Sign Out Button (Accessible for all) -->
                <button
                    type="button"
                    class="btn"
                    data-toggle="modal"
                    data-target="#leaveRSOModal"
                >
                    Leave RSO
                </button>
                <button type="button" class="btn" onclick="signOut()">
                    Sign Out
                </button>
            </div>
        </nav>

        <!-- Filter Buttons -->
        <div class="container my-3">
            <div class="row justify-content-left">
                <div class="col-md-8">
                    <div
                        id="filterBtn"
                        class="event-filter-container btn-group btn-group-lg w-100"
                        role="group"
                    >
                        <button
                            type="button"
                            class="btn btn-secondary event-filter active"
                            id="thisWeekFilter"
                        >
                            This Week
                        </button>
                        <button
                            type="button"
                            class="btn btn-secondary event-filter"
                            id="nextWeekFilter"
                        >
                            Next Week
                        </button>
                        <button
                            type="button"
                            class="btn btn-secondary event-filter"
                            id="nextMonthFilter"
                        >
                            Entire Month
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Event Cards -->
        <div class="container mt-5">
            <div class="row" id="eventsContainer">
                <!-- Event cards will be appended here -->
            </div>
        </div>

        <!-- View Details modal -->
        <div
            class="modal fade"
            id="eventDetailsModal"
            tabindex="-1"
            aria-labelledby="eventDetailsModalLabel"
            aria-hidden="true"
        >
            <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="eventDetailsModalLabel">
                            Event Details
                        </h5>
                        <button
                            type="button"
                            class="btn-close"
                            data-dismiss="modal"
                            aria-label="Close"
                        ></button>
                    </div>
                    <div class="modal-body">
                        <div class="container-fluid">
                            <div class="row">
                                <div class="col-12 col-lg-6">
                                    <h2 class="h4 mb-3" id="eventDetailsName">
                                        Event Name
                                    </h2>
                                    <p>
                                        <strong>Date:</strong>
                                        <span id="eventDetailsDate">Date</span>
                                    </p>
                                    <p>
                                        <strong>Location:</strong>
                                        <span id="eventDetailsLocation"
                                            >Location</span
                                        >
                                    </p>
                                    <p>
                                        <strong>Category:</strong>
                                        <span id="eventDetailsCategory"
                                            >Category</span
                                        >
                                    </p>
                                    <p><strong>Contact:</strong></p>
                                    <p>
                                        <strong>Phone:</strong>
                                        <span id="eventDetailsPhone"
                                            >Phone</span
                                        >
                                    </p>
                                    <p>
                                        <strong>Email:</strong>
                                        <span id="eventDetailsEmail"
                                            >Email</span
                                        >
                                    </p>
                                </div>
                                <div class="col-12 col-lg-6">
                                    <div
                                        id="eventDetailsMap"
                                        style="width: 100%; height: 300px"
                                    ></div>
                                </div>
                            </div>
                            <div class="row mt-4">
                                <div class="col-12">
                                    <h2 class="h4 mb-3">Description</h2>
                                    <p id="eventDetailsDescription"></p>
                                </div>
                            </div>

                            <!-- Add a section for rating input
                            <div class="row mt-4">
                                <div class="col-12">
                                    <h2 class="h4 mb-3">Rate this event</h2>
                                    <form id="ratingForm">
                                        <div class="form-group">
                                            <label for="eventRating"
                                                >Select a rating (1-5):</label
                                            >
                                            <select
                                                class="form-control"
                                                id="eventRating"
                                            >
                                                <option>1</option>
                                                <option>2</option>
                                                <option>3</option>
                                                <option>4</option>
                                                <option>5</option>
                                            </select>
                                        </div>
                                        <button
                                            type="submit"
                                            class="btn btn-primary"
                                            id="submitRating"
                                        >
                                            Submit Rating
                                        </button>
                                    </form>
                                </div>
                            </div> -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button
                            type="button"
                            class="btn btn-primary"
                            data-dismiss="modal"
                            data-toggle="modal"
                            data-target="#commentsModal"
                        >
                            View Comments
                        </button>
                        <button
                            type="button"
                            class="btn btn-secondary"
                            data-dismiss="modal"
                        >
                            Close
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Comments modal -->
        <div
            class="modal fade"
            id="commentsModal"
            tabindex="-1"
            aria-labelledby="commentsModalLabel"
            aria-hidden="true"
        >
            <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="commentsModalLabel">
                            Event Comments
                        </h5>
                        <button
                            type="button"
                            class="btn-close"
                            data-dismiss="modal"
                            aria-label="Close"
                        ></button>
                    </div>
                    <div class="modal-body">
                        <!-- Add your comments display logic here -->

                        <!-- Comment input form -->
                        <form id="commentForm">
                            <div class="form-group">
                                <label for="commentInput">Add a comment:</label>
                                <textarea
                                    class="form-control"
                                    id="commentInput"
                                    rows="3"
                                ></textarea>
                            </div>
                            <button
                                type="submit"
                                class="btn btn-primary"
                                id="submitComment"
                            >
                                Submit Comment
                            </button>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button
                            type="button"
                            class="btn btn-secondary"
                            data-dismiss="modal"
                        >
                            Close
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Approve Public Event Modal -->
        <div
            class="modal fade"
            id="approvePublicEventModal"
            tabindex="-1"
            role="dialog"
            aria-labelledby="approvePublicEventModalLabel"
            aria-hidden="true"
        >
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5
                            class="modal-title"
                            id="approvePublicEventModalLabel"
                        >
                            Approve Public Event
                        </h5>
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                            aria-label="Close"
                        >
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form id="approvePublicEventForm">
                            <div class="form-group">
                                <label for="eventTitle">Event Title</label>
                                <input
                                    type="text"
                                    class="form-control"
                                    id="eventTitle"
                                    placeholder="Enter event title"
                                />
                            </div>
                            <div class="form-group">
                                <label for="eventDescription"
                                    >Event Description</label
                                >
                                <textarea
                                    class="form-control"
                                    id="eventDescription"
                                    rows="3"
                                ></textarea>
                            </div>
                            <div class="form-group">
                                <label for="eventDateTime"
                                    >Event Date and Time</label
                                >
                                <input
                                    type="datetime-local"
                                    class="form-control"
                                    id="eventDateTime"
                                />
                            </div>
                            <div class="form-group">
                                <label for="eventLocation"
                                    >Event Location</label
                                >
                                <input
                                    type="text"
                                    class="form-control"
                                    id="eventLocation"
                                    placeholder="Enter event location"
                                />
                            </div>
                            <div class="form-group">
                                <label for="contactPhone">Contact Phone</label>
                                <input
                                    type="text"
                                    class="form-control"
                                    id="contactPhone"
                                    placeholder="Enter contact phone"
                                />
                            </div>
                            <div class="form-group">
                                <label for="contactEmail">Contact Email</label>
                                <input
                                    type="email"
                                    class="form-control"
                                    id="contactEmail"
                                    placeholder="Enter contact email"
                                />
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button
                            type="button"
                            class="btn btn-secondary"
                            data-dismiss="modal"
                        >
                            Close
                        </button>
                        <button
                            type="button"
                            class="btn btn-primary"
                            id="approveBtn"
                        >
                            Approve
                        </button>

                        <script>
                            document
                                .getElementById("approveBtn")
                                .addEventListener("click", function () {
                                    // validate form before submitting
                                    validateApprovePublicEventForm();
                                });
                        </script>
                    </div>
                </div>
            </div>
        </div>

        <!-- Create RSO Modal -->
        <div
            class="modal fade"
            id="createRSOModal"
            tabindex="-1"
            role="dialog"
            aria-labelledby="createRSOModalLabel"
            aria-hidden="true"
        >
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="createRSOModalLabel">
                            Create RSO
                        </h5>
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                            aria-label="Close"
                        >
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form id="createRSOForm">
                            <div class="form-group">
                                <label for="rsoName">RSO Name</label>
                                <input
                                    type="text"
                                    class="form-control"
                                    id="createRsoName"
                                    placeholder="Enter RSO name"
                                    required
                                />
                            </div>
                            <div class="form-group">
                                <label for="rsoDescription"
                                    >RSO Description</label
                                >
                                <textarea
                                    class="form-control"
                                    id="createRsoDescription"
                                    rows="3"
                                    required
                                ></textarea>
                            </div>
                            <div class="form-group">
                                <label for="university">University Name</label>
                                <input
                                    type="text"
                                    class="form-control"
                                    id="createRsoUniversity"
                                    placeholder="Enter university name"
                                    required
                                />
                                <ul class="list"></ul>
                            </div>

                            <div class="form-group">
                                <label for="rsoEmail">RSO Email</label>
                                <input
                                    type="email"
                                    class="form-control"
                                    id="createRsoEmail"
                                    placeholder="Enter RSO email"
                                    required
                                />
                            </div>
                            <div class="form-group">
                                <label for="initialMembers"
                                    >Initial Members</label
                                >
                                <input
                                    type="email"
                                    class="form-control"
                                    id="initialMembers"
                                    placeholder="Enter email addresses of three other students"
                                    required
                                />
                                <small
                                    id="initialMembersHelp"
                                    class="form-text text-muted"
                                    >Email addresses should be separated by
                                    commas and have the same email domain as the
                                    RSO email.</small
                                >
                            </div>
                            <div class="form-group">
                                <label for="rsoAdmin">RSO Admin</label>
                                <input
                                    type="text"
                                    class="form-control"
                                    id="createRsoAdmin"
                                    placeholder="Enter RSO admin name"
                                    required
                                />
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button
                            type="button"
                            class="btn btn-secondary"
                            data-dismiss="modal"
                        >
                            Close
                        </button>
                        <button
                            type="button"
                            class="btn btn-primary"
                            id="saveChangesBtn"
                            onclick="validateRsoForm()"
                        >
                            Save changes
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Create University Modal -->
        <div
            class="modal fade"
            id="createUniversityModal"
            tabindex="-1"
            role="dialog"
            aria-labelledby="createUniversityModalLabel"
            aria-hidden="true"
        >
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="createUniversityModalLabel">
                            Create University
                        </h5>
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                            aria-label="Close"
                        >
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form>
                            <div class="form-group">
                                <label for="universityLocation"
                                    >University Name</label
                                >
                                <div class="input-group">
                                    <input
                                        type="text"
                                        class="form-control"
                                        id="universityLocation"
                                        placeholder="Enter university location"
                                    />
                                    <div class="input-group-append">
                                        <button
                                            class="btn btn-outline-secondary"
                                            type="button"
                                            id="searchButton"
                                            onclick="geocode(document.getElementById('universityLocation'), document.getElementById('universityLat'), document.getElementById('universityLng'))"
                                        >
                                            Search
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-sm-6">
                                    <label for="universityLat">Latitude</label>
                                    <input
                                        type="text"
                                        class="form-control"
                                        id="universityLat"
                                        placeholder="Latitude"
                                        readonly
                                    />
                                </div>
                                <div class="col-sm-6">
                                    <label for="universityLng">Longitude</label>
                                    <input
                                        type="text"
                                        class="form-control"
                                        id="universityLng"
                                        placeholder="Longitude"
                                        readonly
                                    />
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="universityDescription"
                                    >University Description</label
                                >
                                <textarea
                                    class="form-control"
                                    id="universityDescription"
                                    rows="3"
                                ></textarea>
                            </div>
                            <div class="form-group">
                                <label for="numberOfStudents"
                                    >Number of Students</label
                                >
                                <input
                                    type="number"
                                    class="form-control"
                                    id="numberOfStudents"
                                    placeholder="Enter number of students"
                                />
                            </div>
                            <div class="form-group">
                                <label for="universityPictures"
                                    >University Pictures</label
                                >
                                <input
                                    type="url"
                                    class="form-control"
                                    id="universityPictures"
                                    name="universityPictures"
                                    placeholder="Enter university pictures"
                                    pattern=".*\.(jpg|jpeg|png|gif)$"
                                    required
                                />
                                <small class="form-text text-muted"
                                    >Enter a valid image URL (ending in .jpg,
                                    .jpeg, .png, or .gif)</small
                                >
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button
                            type="button"
                            class="btn btn-secondary"
                            data-dismiss="modal"
                        >
                            Close
                        </button>
                        <button
                            type="button"
                            class="btn btn-primary"
                            onClick="validateUniversity()"
                        >
                            Save changes
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Join RSO Modal -->
        <div
            class="modal fade"
            id="joinRSOModal"
            tabindex="-1"
            role="dialog"
            aria-labelledby="joinRSOModalLabel"
            aria-hidden="true"
        >
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="joinRSOModalLabel">
                            Join RSO
                        </h5>
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                            aria-label="Close"
                        >
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form>
                            <div class="form-group">
                                <label for="rsoName">RSO Name</label>
                                <input
                                    type="text"
                                    class="form-control"
                                    id="joinRsoName"
                                    placeholder="Enter RSO name"
                                />
                            </div>
                            <div class="form-group">
                                <label for="adminEmail">Email</label>
                                <input
                                    type="email"
                                    class="form-control"
                                    id="joinRsoEmail"
                                    placeholder="Enter email"
                                />
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button
                            type="button"
                            class="btn btn-secondary"
                            data-dismiss="modal"
                        >
                            Close
                        </button>
                        <button
                            type="button"
                            class="btn btn-primary"
                            onclick="perpareJoinRso()"
                        >
                            Join RSO
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- LEAVE RSO MODAL -->
        <div
            class="modal fade"
            id="leaveRSOModal"
            tabindex="-1"
            role="dialog"
            aria-labelledby="leaveRSOModalLabel"
            aria-hidden="true"
        >
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="leaveRSOModalLabel">
                            Leave RSO
                        </h5>
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                            aria-label="Close"
                        >
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="leaveRsoName">RSO Name</label>
                            <input
                                type="text"
                                class="form-control"
                                id="leaveRsoName"
                                placeholder="Enter RSO name"
                            />
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button
                            type="button"
                            class="btn btn-secondary"
                            data-dismiss="modal"
                        >
                            Cancel
                        </button>
                        <button
                            type="button"
                            class="btn btn-danger"
                            onclick="prepareLeaveRso()"
                        >
                            Leave RSO
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Create Event Modal -->
        <div
            class="modal fade"
            id="createEventModal"
            tabindex="-1"
            role="dialog"
            aria-labelledby="createEventModalLabel"
            aria-hidden="true"
        >
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="createEventModalLabel">
                            Create Event
                        </h5>
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                            aria-label="Close"
                        >
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form>
                            <div class="form-group">
                                <label for="eventName">Event Name</label>
                                <input
                                    type="text"
                                    class="form-control"
                                    id="eventName"
                                    placeholder="Enter event name"
                                />
                            </div>
                            <div class="form-group">
                                <label for="eventCategory"
                                    >Event Category</label
                                >
                                <input
                                    type="text"
                                    class="form-control"
                                    id="eventCategory"
                                    placeholder="Enter event category"
                                />
                            </div>
                            <div class="form-group">
                                <label for="createEventDescription"
                                    >Event Description</label
                                >
                                <textarea
                                    class="form-control"
                                    id="createEventDescription"
                                    rows="3"
                                ></textarea>
                            </div>
                            <div class="form-group">
                                <label for="eventDate">Event Date</label>
                                <input
                                    type="date"
                                    class="form-control"
                                    id="eventDate"
                                />
                            </div>
                            <div class="form-group">
                                <label for="eventStartTime"
                                    >Event Start Time</label
                                >
                                <input
                                    type="time"
                                    class="form-control"
                                    id="eventStartTime"
                                    name="eventStartTime"
                                    onchange="setStopTime()"
                                />
                            </div>

                            <div class="form-group">
                                <label for="eventStopTime"
                                    >Event Stop Time</label
                                >
                                <input
                                    type="time"
                                    class="form-control"
                                    id="eventStopTime"
                                    name="eventStopTime"
                                    readonly
                                />
                            </div>
                            <div class="form-group">
                                <label for="eventLocation"
                                    >Event Location</label
                                >
                                <div class="input-group">
                                    <input
                                        type="text"
                                        class="form-control"
                                        id="eventLocationDiv"
                                        placeholder="Enter event location"
                                    />
                                    <div class="input-group-append">
                                        <button
                                            class="btn btn-outline-secondary"
                                            type="button"
                                            id="searchButton"
                                            onclick="geocode(document.getElementById('eventLocationDiv'),document.getElementById('eventLat'),document.getElementById('eventLng'))"
                                        >
                                            Search
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-sm-6">
                                    <label for="eventLat">Latitude</label>
                                    <input
                                        type="text"
                                        class="form-control"
                                        id="eventLat"
                                        placeholder="Latitude"
                                        readonly
                                    />
                                </div>
                                <div class="col-sm-6">
                                    <label for="eventLng">Longitude</label>
                                    <input
                                        type="text"
                                        class="form-control"
                                        id="eventLng"
                                        placeholder="Longitude"
                                        readonly
                                    />
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="createEventContactPhone"
                                    >Contact Phone</label
                                >
                                <input
                                    type="text"
                                    class="form-control"
                                    id="createEventContactPhone"
                                    placeholder="Enter contact phone"
                                />
                            </div>
                            <div class="form-group">
                                <label for="createEventContactEmail"
                                    >Contact Email</label
                                >
                                <input
                                    type="email"
                                    class="form-control"
                                    id="createEventContactEmail"
                                    placeholder="Enter contact email"
                                />
                            </div>
                            <div class="form-group">
                                <label for="eventType">Event Type</label>
                                <select class="form-control" id="eventType">
                                    <option value="public">Public</option>
                                    <option value="private">Private</option>
                                    <option value="rso">RSO</option>
                                </select>
                            </div>
                            <div
                                id="rsoDiv"
                                class="form-group"
                                style="display: none"
                            >
                                <label for="rsoNameDiv">RSO Name</label>
                                <input
                                    type="email"
                                    class="form-control"
                                    id="rsoNameDiv"
                                    placeholder="Enter RSO name"
                                />
                            </div>
                            <input type="hidden" id="rsoId" value="" />
                            <input type="hidden" id="adminId" value="" />
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button
                            type="button"
                            class="btn btn-secondary"
                            data-dismiss="modal"
                        >
                            Close
                        </button>
                        <button
                            type="button"
                            class="btn btn-primary"
                            onClick="validateEvent()"
                        >
                            Save changes
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <script>
            function geocode(location, latElement, lngElement) {
                var geocoder = new google.maps.Geocoder();

                geocoder.geocode(
                    { address: location.value },
                    function (results, status) {
                        if (status === "OK") {
                            var location = results[0].geometry.location;

                            latElement.value = location.lat();
                            lngElement.value = location.lng();
                        } else {
                            alert("Geocoding failed: " + status);
                        }
                    }
                );
            }

            // Get the filter button container
            const filterBtn = document.querySelector("#filterBtn");

            // Add event listener to the filter buttons
            filterBtn.addEventListener("click", (event) => {
                // Get the clicked button and its ID
                const clickedBtn = event.target;
                const btnId = clickedBtn.id;

                // Get the start and end of the current week
                const today = new Date();
                const dayOfWeek = today.getDay();
                const startOfWeek = new Date(
                    today.getFullYear(),
                    today.getMonth(),
                    today.getDate() - dayOfWeek
                );
                const endOfWeek = new Date(
                    today.getFullYear(),
                    today.getMonth(),
                    today.getDate() + (6 - dayOfWeek)
                );

                if (btnId === "thisWeekFilter") {
                    // If "This Week" button is selected, filter events based on the start and end of the current week
                    const filteredEvents = events.filter((event) => {
                        const eventDate = new Date(event.date);
                        return (
                            eventDate >= startOfWeek && eventDate <= endOfWeek
                        );
                    });
                    // Call the function to display the filtered events
                    displayEvents(filteredEvents);
                } else if (btnId === "nextWeekFilter") {
                    // If "Next Week" button is selected, filter events based on the start and end of next week
                    const startOfNextWeek = new Date(
                        startOfWeek.getFullYear(),
                        startOfWeek.getMonth(),
                        startOfWeek.getDate() + 7
                    );
                    const endOfNextWeek = new Date(
                        endOfWeek.getFullYear(),
                        endOfWeek.getMonth(),
                        endOfWeek.getDate() + 7
                    );
                    const filteredEvents = events.filter((event) => {
                        const eventDate = new Date(event.date);
                        return (
                            eventDate >= startOfNextWeek &&
                            eventDate <= endOfNextWeek
                        );
                    });
                    // Call the function to display the filtered events
                    displayEvents(filteredEvents);
                } else if (btnId === "nextMonthFilter") {
                    // If "Entire Month" button is selected, display all events
                    displayEvents(events);
                }
            });

            // JQuery to show an extra div if event is an rso
            $(document).ready(function () {
                $("#eventType").on("change", function () {
                    if (this.value === "rso") {
                        $("#rsoDiv").show();
                    } else {
                        $("#rsoDiv").hide();
                    }
                });
            });

            // Store the filter buttons in an array
            const filterButtons = document.querySelectorAll(".event-filter");

            // Add event listener to each button
            filterButtons.forEach((button) => {
                button.addEventListener("click", () => {
                    // Remove active class from all buttons
                    filterButtons.forEach((btn) => {
                        btn.classList.remove("active");
                    });

                    // Add active class to clicked button
                    button.classList.add("active");
                });
            });
        </script>
    </body>
</html>
